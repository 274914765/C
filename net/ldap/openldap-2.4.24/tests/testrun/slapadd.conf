# master slapd config -- for testing
# $OpenLDAP: pkg/ldap/tests/data/slapd-whoami.conf,v 1.10.2.10 2011/01/04 23:51:00 kurt Exp $
 This work is part of OpenLDAP Software <http://www.openldap.org/>.

 Copyright 1998-2011 The OpenLDAP Foundation.
 All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted only as authorized by the OpenLDAP
 Public License.

 A copy of this license is available in the file LICENSE in the
 top-level directory of the distribution or, alternatively, at
 <http://www.OpenLDAP.org/license.html>.

include		./schema/core.schema
include		./schema/cosine.schema
include		./schema/inetorgperson.schema
include		./schema/openldap.schema
include		./schema/nis.schema
pidfile		/root/srcpkg/LDAP/openldap-2.4.24/tests/testrun/slapd.1.pid
argsfile	/root/srcpkg/LDAP/openldap-2.4.24/tests/testrun/slapd.1.args

#mod#modulepath	../servers/slapd/back-/
#mod#moduleload	back_.la
#monitormod#modulepath ../servers/slapd/back-monitor/
#monitormod#moduleload back_monitor.la

#################################
# database definitions
#################################

authz-policy	both
authz-regexp	"^uid=group/([^,]+),.*" "ldap:///dc=example,dc=com??sub?cn=$1"
authz-regexp	"^uid=([^,]+),.*" "ldap:///dc=example,dc=com??sub?uid=$1"

#
# normal installations should protect root dse,
# cn=monitor, cn=schema, and cn=config
#

access to attrs=authzFrom,authzTo
	by * auth

access to attrs=userpassword
	by anonymous auth
	by self write

access to *
	by self write
	by * read

database	

suffix		"dc=example,dc=com"
rootdn		"cn=Manager,dc=example,dc=com"
rootpw		secret
directory	/root/srcpkg/LDAP/openldap-2.4.24/tests/testrun/db.1.a
#bdb#index		objectClass	eq
#bdb#index		cn,sn,uid	pres,eq,sub
#hdb#index		objectClass	eq
#hdb#index		cn,sn,uid	pres,eq,sub
#ndb#dbname db_1
#ndb#include ./testdata/ndb.conf

#monitor#database	monitor
